language: node_js
node_js:
  - "node"
services:
  - mysql
before_script:
  - cd $TRAVIS_BUILD_DIR/backend
  - cp ./test/config.test.json ./src/config.json
  - npm install
  - cd test
  - ./setupTestEnv.sh
matrix:
  include:
  - name: "Frontend"
    addons:
      chrome: stable
    script:  
    - cd $TRAVIS_BUILD_DIR/backend
    - npm start&
    - sleep 10
    - cd $TRAVIS_BUILD_DIR/frontend/test
    - ./setup-nginx.sh
    - cd ..
    - cp ./test/config.test.json ./config.json
    - npm install
    - npm run dev& > /dev/null 2>&1
    - sleep 10
    - npm test
  - name: "Backend"
    script:  
      - cd $TRAVIS_BUILD_DIR/backend
      - npm test
