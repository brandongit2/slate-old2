language: node_js
addons:
  chrome: stable
node_js:
  - "node"
services:
  - mysql
before_script:
  - cd $TRAVIS_BUILD_DIR/backend
  - cp ./test/config.test.json ./src/config.json
  - cd $TRAVIS_BUILD_DIR/backend
  - npm install
matrix:
  include:
  - name: "Frontend"
    script:  
    - cd $TRAVIS_BUILD_DIR/backend/test
    - ./setup-tests.sh
    - ./setupTestEnv.sh
    - cd ..
    - npm start&
    - sleep 10
    - cd $TRAVIS_BUILD_DIR/frontend
    - cp ./test/config.test.json ./config.json
    - npm install
    - npm run dev& > /dev/null 2>&1
    - sleep 10
    - npm test
  - name: "Backend"
  script:  
    - cd $TRAVIS_BUILD_DIR/backend
    - npm test
