language: node_js
node_js:
  - "node"
services:
  - mysql
before_install:
  - cd backend
  - cp src/tests/mysqlCreds.test.json ./mysqlCreds.json
  - cp src/tests/sendgrid.test.json ./sendgrid.json
  - mysql -e 'CREATE DATABASE slate;'
  - cat migrations/* | mysql slate
  - cat tests/slate.test.sql | mysql slate
script:
  - cd backend
  - npm install
  - npm test